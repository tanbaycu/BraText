<!DOCTYPE html>
<html lang="en">
<head>
  <title>Brat Text Generator - Create Stunning BRAT Memes Online | Free Tool</title>
<!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ðŸ”¥ Create stunning BRAT text memes with customizable colors and themes! Free online tool to generate viral BRAT-style typography. No signup required - instant download!">
    <meta name="keywords" content="brat generator, brat text generator, brat meme maker, charli xcx brat, brat font generator, meme generator, text generator, viral memes, brat aesthetic, green text meme">
    <meta name="author" content="BraText - Free Brat Generator">
    <meta name="language" content="English">

    <!-- Enhanced SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">
    <meta name="rating" content="general">
    <meta name="revisit-after" content="1 day">
    <meta name="distribution" content="global">
    <meta name="category" content="Entertainment, Tools, Meme Generator">
    <meta name="classification" content="Meme Generator Tool">
    
    <!-- Open Graph (OG) Meta Tags for Social Media -->
    <meta property="og:site_name" content="BraText - Brat Generator">
    <meta property="og:title" content="ðŸ”¥ Brat Text Generator - Create Viral BRAT Memes | Free Online Tool">
    <meta property="og:description" content="Generate stunning BRAT-style text memes instantly! Customize colors, add your text, and create viral content inspired by Charli XCX's BRAT aesthetic. 100% Free!">
    <meta property="og:image" content="https://bratext.vercel.app/brat.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Brat Text Generator - Create viral BRAT-style memes online">
    <meta property="og:url" content="https://bratext.vercel.app/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bratextgen">
    <meta name="twitter:creator" content="@bratextgen">
    <meta name="twitter:title" content="ðŸ”¥ Brat Text Generator - Create Viral BRAT Memes">
    <meta name="twitter:description" content="Generate BRAT-style text memes instantly! Free online tool inspired by Charli XCX's iconic aesthetic. No signup needed! ðŸŽ¨âœ¨">
    <meta name="twitter:image" content="https://bratext.vercel.app/brat.png">
    <meta name="twitter:image:alt" content="Brat Text Generator - Free online meme creation tool">

    <!-- LinkedIn Meta Tags -->
    <meta property="linkedin:title" content="Brat Text Generator - Create Viral BRAT Memes Online">
    <meta property="linkedin:description" content="Professional meme creation tool for BRAT-style typography. Free to use, instant download, perfect for social media content creators.">
    <meta property="linkedin:image" content="https://bratext.vercel.app/brat.png">

    <!-- Pinterest Meta Tags -->
    <meta property="pinterest:title" content="Brat Text Generator - Free BRAT Meme Maker">
    <meta property="pinterest:description" content="ðŸ”¥ Create viral BRAT-style text memes! Free tool with customizable colors and instant download. Perfect for social media!">
    <meta property="pinterest:image" content="https://bratext.vercel.app/brat.png">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://bratext.vercel.app/">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Brat Text Generator",
        "alternateName": "BraText",
        "description": "Free online tool to create stunning BRAT-style text memes with customizable colors and themes. Inspired by Charli XCX's BRAT aesthetic.",
        "url": "https://bratext.vercel.app/",
        "image": "https://bratext.vercel.app/brat.png",
        "applicationCategory": "Entertainment",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "BraText Team"
        },
        "publisher": {
            "@type": "Organization",
            "name": "BraText",
            "logo": {
                "@type": "ImageObject",
                "url": "https://bratext.vercel.app/brat.png"
            }
        },
        "inLanguage": "en-US",
        "isAccessibleForFree": true,
        "browserRequirements": "Requires JavaScript",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "reviewCount": "2847",
            "bestRating": "5",
            "worstRating": "1"
        },
        "featureList": [
            "Free BRAT text generation",
            "Customizable color themes",
            "Instant download",
            "No signup required",
            "Mobile responsive",
            "Viral meme creation"
        ]
    }
    </script>

    <!-- Additional SEO Enhancement -->
    <meta name="theme-color" content="#8ACF00">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BraText">
    <meta name="application-name" content="BraText">
    <meta name="msapplication-TileColor" content="#8ACF00">
    <meta name="msapplication-TileImage" content="https://bratext.vercel.app/brat.png">

    <!-- Favicon - Only using brat.png -->
    <link rel="icon" type="image/png" href="https://bratext.vercel.app/brat.png">
    <link rel="apple-touch-icon" href="https://bratext.vercel.app/brat.png">
    <link rel="shortcut icon" href="https://bratext.vercel.app/brat.png" type="image/png">
    <link rel="manifest" href="https://bratext.vercel.app/manifest.json">

    <!-- Preload important resources -->
    <link rel="preload" href="https://bratext.vercel.app/brat.png" as="image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://code.jquery.com">
    <link rel="dns-prefetch" href="https://unpkg.com">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        @font-face {
            font-family: 'timesregular';
            src: url('/sites/g/files/g2000017981/files/2024-01/times-roman-01-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'arial_narrowregular';
            src: url('https://www.bratgenerator.com/sites/g/files/g2000017981/files/2024-03/arial_narrow-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            text-align: center;
            background-color: #fff;
            margin: 0;
            padding: 0;
        }

        /* Typography System */
        .text-xs { font-size: 11px; line-height: 1.3; }
        .text-sm { font-size: 13px; line-height: 1.4; }
        .text-base { font-size: 15px; line-height: 1.5; }
        .text-lg { font-size: 17px; line-height: 1.6; }
        
        .font-light { font-weight: 300; }
        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }

        /* UI Controls - Fixed Layout */
        .ui-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 100;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 20px;
            align-items: start;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ui-controls.hidden {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
        }

        /* Left Panel - Theme Control */
        .theme-panel {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-start;
        }

        .control-label {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(0, 0, 0, 0.5);
            margin-bottom: 4px;
        }

        /* Color Selector - Compact */
        .color-selector {
            position: relative;
        }

        .color-dropdown-trigger {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            min-width: 100px;
        }

        .color-dropdown-trigger:hover {
            background: rgba(255, 255, 255, 1);
            border-color: rgba(0, 0, 0, 0.12);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
        }

        .color-preview {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .color-dropdown {
            position: absolute;
            top: calc(100% + 6px);
            left: 0;
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            padding: 8px;
            display: none;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            z-index: 1002;
        }

        .color-dropdown.open {
            display: block;
        }

        .color-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.15s ease;
            white-space: nowrap;
            user-select: none;
            -webkit-user-select: none;
        }

        .color-option:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        .color-option.active {
            background: rgba(0, 0, 0, 0.08);
            color: rgba(0, 0, 0, 0.9);
        }

        .color-swatch {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Center - Empty space for text */
        .center-space {
            /* This creates space for the main text */
        }

        /* Right Panel - Present Controls */
        .present-panel {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end;
            min-width: 180px;
        }

        /* Session Status - Improved */
        .session-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.04);
            border-radius: 8px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: rgba(0, 0, 0, 0.6);
        }

        .session-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
        }

        .session-indicator.recording {
            background: #ef4444;
            animation: pulse 2s infinite;
        }

        .session-indicator.ready {
            background: #22c55e;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Present Mode Section - Fixed */
        .present-mode-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
            width: 100%;
        }

        .present-mode-selector {
            position: relative;
            width: 100%;
        }

        .present-mode-trigger {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 8px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            width: 100%;
        }

        .present-mode-trigger:hover {
            background: rgba(0, 0, 0, 0.06);
            border-color: rgba(0, 0, 0, 0.12);
        }

        .present-mode-dropdown {
            position: absolute;
            top: calc(100% + 6px);
            right: 0;
            left: 0;
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            padding: 8px;
            display: none;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            z-index: 1002;
        }

        .present-mode-dropdown.open {
            display: block;
        }

        .present-mode-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            transition: all 0.15s ease;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            user-select: none;
            -webkit-user-select: none;
        }

        .present-mode-option:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        .present-mode-option.active {
            background: rgba(0, 0, 0, 0.08);
        }

        /* Play Button - Refined */
        .play-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #000 0%, #333 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .play-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .play-button:hover::before {
            left: 100%;
        }

        .play-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .play-button:active {
            transform: translateY(0);
        }

        .play-button:disabled {
            background: linear-gradient(135deg, #ccc 0%, #999 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .play-button:disabled:hover {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Text Input - Improved positioning */
        .input-container {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-container.hidden {
            opacity: 0;
            transform: translateX(-50%) translateY(20px);
            pointer-events: none;
        }

        #textInput {
            padding: 18px 24px;
            font-size: 16px;
            border: 2px solid rgba(0, 0, 0, 0.08);
            border-radius: 14px;
            width: 450px;
            max-width: 80vw;
            font-family: 'timesregular', serif;
            text-align: center;
            outline: none;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
        }

        #textInput:focus {
            border-color: rgba(0, 0, 0, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08), 0 0 0 4px rgba(0, 0, 0, 0.04);
            transform: translateY(-2px);
        }

        #textInput::placeholder {
            color: rgba(0, 0, 0, 0.4);
            font-style: italic;
        }

        /* Main Content - GIá»® NGUYÃŠN PHIÃŠN Báº¢N CÅ¨ */
        #memeContainer {
            position: relative;
            display: block;
            width: 100%;
            height: 100vh;
            margin-top: 0;
            font-size: 0px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #memeImage {
            display: none;
        }

        #textOverlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            font-size: 48px;
            color: #000000;
            font-weight: 500;
            font-family: arial_narrowregular, "Arial Narrow", sans-serif;
            font-size: 280px;
            text-align: center;
            width: 100%;
            white-space: pre-line;
            word-wrap: break-word;
        }

        /* Theme Styles - GIá»® NGUYÃŠN */
        body {
            background-color: #fff;
        }

        body.white div#toggleButtonWhite {
            border: 2px solid #000;
        }

        body.green div#toggleButtonGreen {
            border: 2px solid #000;
        }

        body.white #textOverlay {
            font-size: 100px;
            max-width: 500px;
            text-align: justify;
            text-align-last: justify;
            padding: 20px;
            height: 500px;
        }

        div#textOverlay span.textFitted {
            font-weight: 500;
            font-family: arial_narrowregular, "Arial Narrow", sans-serif;
            font-size: 100px;
            filter: blur(2px);
            white-space: pre-line;
            word-wrap: break-word;
        }

        body.green #textOverlay {
            font-size: 5vw !important;
        }

        body.green div#textOverlay span.textFitted {
            white-space: pre-line;
            word-wrap: break-word;
        }

        /* Green Theme */
        body.green #textInput {
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.95);
        }

        body.green #textInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 0 0 4px rgba(255, 255, 255, 0.1);
        }

        body.green {
            background-color: #8ACF00;
        }

        body.green .color-dropdown-trigger,
        body.green .present-mode-trigger {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.2);
        }

        body.green .color-dropdown-trigger:hover,
        body.green .present-mode-trigger:hover {
            background: rgba(255, 255, 255, 1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        body.green .session-status {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }

        /* Presentation Mode */
        body.presentation-mode .ui-controls,
        body.presentation-mode .input-container {
            opacity: 0;
            pointer-events: none;
        }

        /* Presentation End Controls - Updated with Replay Button */
        .presentation-end-controls {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            gap: 16px;
        }

        .presentation-end-controls.show {
            opacity: 1;
            pointer-events: auto;
        }

        .presentation-control-button {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .presentation-control-button:hover {
            background: rgba(0, 0, 0, 1);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .presentation-control-button.replay {
            background: rgba(34, 197, 94, 0.9);
        }

        .presentation-control-button.replay:hover {
            background: rgba(34, 197, 94, 1);
        }

        /* Hidden elements */
        .hidden {
            display: none !important;
        }

        .-is-visually-hidden {
            width: 1px;
            height: 1px;
            color: transparent;
            font-size: 0;
        }

        #memeText {
            display: none;
        }

        /* Mobile Responsive - Improved */
        @media only screen and (max-width: 768px) {
            .ui-controls {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
                gap: 12px;
                top: 16px;
                left: 16px;
                right: 16px;
            }

            .theme-panel,
            .present-panel {
                align-items: stretch;
            }

            .present-mode-section {
                align-items: stretch;
            }

            .present-mode-dropdown {
                right: 0;
                left: 0;
            }

            #textInput {
                width: 300px;
                padding: 16px 20px;
                font-size: 15px;
            }

            .input-container {
                bottom: 20px;
            }

            #textOverlay {
                font-size: 150px;
            }

            body.white #textOverlay {
                width: 350px;
                height: 350px;
                padding: 0;
            }

            #memeContainer {
                height: 85vh;
                margin-top: 10%;
            }

            .green div#memeContainer {
                min-height: 85vh;
                height: auto;
            }

            body.green #textOverlay {
                font-size: 15vw !important;
                position: static;
                transform: none;
            }

            .presentation-end-controls {
                flex-direction: column;
                gap: 12px;
            }

            .presentation-control-button {
                padding: 14px 20px;
                font-size: 14px;
            }
        }

        @media only screen and (max-width: 1023px) and (orientation: landscape) {
            .green div#memeContainer {
                margin: 0 auto;
                display: block;
            }
        }

        /* FIXED: Remove backdrop entirely and use different approach */
        .dropdown-backdrop {
            display: none !important;
        }
    </style>
</head>

<body class="white">
    <h1 class="-is-visually-hidden">Brat Generator</h1>
    
    <!-- UI Controls -->
    <div class="ui-controls" id="uiControls">
        <!-- Theme Panel -->
        <div class="theme-panel">
            <div class="control-label">Theme</div>
            <div class="color-selector">
                <div class="color-dropdown-trigger" id="colorTrigger">
                    <div class="color-preview" id="colorPreview" style="background-color: #fff;"></div>
                    <span id="colorLabel">White</span>
                    <i data-lucide="chevron-down" style="width: 12px; height: 12px; opacity: 0.6;"></i>
                </div>
                <div class="color-dropdown" id="colorDropdown">
                    <div class="color-option active" data-theme="white" id="whiteOption">
                        <div class="color-swatch" style="background-color: #fff;"></div>
                        <span>White</span>
                    </div>
                    <div class="color-option" data-theme="green" id="greenOption">
                        <div class="color-swatch" style="background-color: #8ACF00;"></div>
                        <span>Green</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Center Space -->
        <div class="center-space"></div>

        <!-- Present Panel -->
        <div class="present-panel">
            <!-- Session Status -->
            <div class="session-status" id="sessionStatus">
                <div class="session-indicator" id="sessionIndicator"></div>
                <span id="sessionText">Ready</span>
            </div>

            <!-- Present Mode Section -->
            <div class="present-mode-section">
                <div class="control-label" style="text-align: right;">Present Mode</div>
                <div class="present-mode-selector">
                    <div class="present-mode-trigger" id="presentModeTrigger">
                        <span id="presentModeLabel">Current Session</span>
                        <i data-lucide="chevron-down" style="width: 10px; height: 10px; opacity: 0.6;"></i>
                    </div>
                    <div class="present-mode-dropdown" id="presentModeDropdown">
                        <div class="present-mode-option active" data-mode="current" id="currentOption">
                            <i data-lucide="edit-3" style="width: 10px; height: 10px;"></i>
                            <span>Current Session</span>
                        </div>
                        <div class="present-mode-option" data-mode="white" id="whiteOnlyOption">
                            <div class="color-swatch" style="background-color: #fff; width: 10px; height: 10px;"></div>
                            <span>White Only</span>
                        </div>
                        <div class="present-mode-option" data-mode="green" id="greenOnlyOption">
                            <div class="color-swatch" style="background-color: #8ACF00; width: 10px; height: 10px;"></div>
                            <span>Green Only</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Play Button -->
            <button class="play-button" id="playButton">
                <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                <span>Present</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="memeContainer">
        <div id="memeText"></div>
        <div id="textOverlay"></div>
    </div>

    <!-- Text Input -->
    <div class="input-container" id="inputContainer">
        <input type="text" id="textInput" placeholder="Type your text here..." value="made by tanbaycu with love">
    </div>

    <!-- Presentation End Controls -->
    <div class="presentation-end-controls" id="presentationEndControls">
        <button class="presentation-control-button replay" id="replayPresentationButton">
            <i data-lucide="rotate-ccw" style="width: 18px; height: 18px;"></i>
            <span>Replay</span>
        </button>
        <button class="presentation-control-button" id="closePresentationButton">
            <i data-lucide="x" style="width: 18px; height: 18px;"></i>
            <span>Close</span>
        </button>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables
        let presentationMode = false;
        let currentSession = []; // Current typing session
        let allHistory = []; // All typing history
        let isRecording = false;
        let currentTheme = 'white';
        let presentMode = 'current'; // 'current', 'white', 'green'
        let presentationTimeout;
        let sessionStartTime = null;
        let lastPresentationData = []; // Store last presentation data for replay
        let dropdownJustOpened = false; // Prevent immediate close

        // Function to format text for better line breaks - GIá»® NGUYÃŠN
        function formatTextForDisplay(text, isGreen = false) {
            if (isGreen && text.length > 8) {
                const words = text.split(' ');
                if (words.length > 2) {
                    const mid = Math.ceil(words.length / 2);
                    const line1 = words.slice(0, mid).join(' ');
                    const line2 = words.slice(mid).join(' ');
                    return line1 + '\n' + line2;
                }
            }
            return text;
        }

        // TextFit library - GIá»® NGUYÃŠN HOÃ€N TOÃ€N
        (function (root, factory) {
            "use strict";
            if (typeof define === "function" && define.amd) {
                define([], factory);
            } else if (typeof exports === "object") {
                module.exports = factory();
            } else {
                root.textFit = factory();
            }
        }(typeof global === "object" ? global : this, function () {
            "use strict";
            var defaultSettings = {
                alignVert: false,
                alignHoriz: false,
                multiLine: true,
                detectMultiLine: true,
                minFontSize: 8,
                maxFontSize: 80,
                reProcess: true,
                widthOnly: false,
                alignVertWithFlexbox: false,
            };

            return function textFit(els, options) {
                if (!jQuery("body").hasClass("black")) {
                    options.maxFontSize = 170;
                }
                
                if (!options) options = {};

                var settings = {};
                for (var key in defaultSettings) {
                    if (options.hasOwnProperty(key)) {
                        settings[key] = options[key];
                    } else {
                        settings[key] = defaultSettings[key];
                    }
                }

                if (typeof els.toArray === "function") {
                    els = els.toArray();
                }

                var elType = Object.prototype.toString.call(els);
                if (elType !== '[object Array]' && elType !== '[object NodeList]' &&
                    elType !== '[object HTMLCollection]') {
                    els = [els];
                }

                for (var i = 0; i < els.length; i++) {
                    processItem(els[i], settings);
                }
            };

            function processItem(el, settings) {
                if (!isElement(el) || (!settings.reProcess && el.getAttribute('textFitted'))) {
                    return false;
                }

                if (!settings.reProcess) {
                    el.setAttribute('textFitted', 1);
                }

                var innerSpan, originalHeight, originalHTML, originalWidth;
                var low, mid, high;

                originalHTML = el.innerHTML;
                originalWidth = innerWidth(el);
                originalHeight = innerHeight(el);

                if (!originalWidth || (!settings.widthOnly && !originalHeight)) {
                    if (!settings.widthOnly)
                        throw new Error('Set a static height and width on the target element ' + el.outerHTML +
                            ' before using textFit!');
                    else
                        throw new Error('Set a static width on the target element ' + el.outerHTML +
                            ' before using textFit!');
                }

                if (originalHTML.indexOf('textFitted') === -1) {
                    innerSpan = document.createElement('span');
                    innerSpan.className = 'textFitted';
                    innerSpan.style['display'] = 'inline-block';
                    innerSpan.innerHTML = originalHTML;
                    el.innerHTML = '';
                    el.appendChild(innerSpan);
                } else {
                    innerSpan = el.querySelector('span.textFitted');
                    if (hasClass(innerSpan, 'textFitAlignVert')) {
                        innerSpan.className = innerSpan.className.replace('textFitAlignVert', '');
                        innerSpan.style['height'] = '';
                        el.className.replace('textFitAlignVertFlex', '');
                    }
                }

                if (settings.alignHoriz) {
                    el.style['text-align'] = 'center';
                    innerSpan.style['text-align'] = 'center';
                }

                var multiLine = settings.multiLine;
                if (settings.detectMultiLine && !multiLine &&
                    innerSpan.getBoundingClientRect().height >= parseInt(window.getComputedStyle(innerSpan)['font-size'], 10) * 2) {
                    multiLine = true;
                }

                // Always allow multiline for better text wrapping
                innerSpan.style['white-space'] = 'pre-line';
                innerSpan.style['word-wrap'] = 'break-word';

                low = settings.minFontSize;
                high = settings.maxFontSize;

                var size = low;
                while (low <= high) {
                    mid = (high + low) >> 1;
                    innerSpan.style.fontSize = mid + 'px';
                    var innerSpanBoundingClientRect = innerSpan.getBoundingClientRect();

                    if (
                        innerSpanBoundingClientRect.width <= originalWidth
                        && (settings.widthOnly || innerSpanBoundingClientRect.height <= originalHeight)
                    ) {
                        size = mid;
                        low = mid + 1;
                    } else {
                        high = mid - 1;
                    }
                }

                if (innerSpan.style.fontSize != size + 'px') innerSpan.style.fontSize = size + 'px';

                if (settings.alignVert) {
                    addStyleSheet();
                    var height = innerSpan.scrollHeight;
                    if (window.getComputedStyle(el)['position'] === "static") {
                        el.style['position'] = 'relative';
                    }
                    if (!hasClass(innerSpan, "textFitAlignVert")) {
                        innerSpan.className = innerSpan.className + " textFitAlignVert";
                    }
                    innerSpan.style['height'] = height + "px";
                    if (settings.alignVertWithFlexbox && !hasClass(el, "textFitAlignVertFlex")) {
                        el.className = el.className + " textFitAlignVertFlex";
                    }
                }
            }

            function innerHeight(el) {
                var style = window.getComputedStyle(el, null);
                return el.getBoundingClientRect().height -
                    parseInt(style.getPropertyValue('padding-top'), 10) -
                    parseInt(style.getPropertyValue('padding-bottom'), 10);
            }

            function innerWidth(el) {
                var style = window.getComputedStyle(el, null);
                return el.getBoundingClientRect().width -
                    parseInt(style.getPropertyValue('padding-left'), 10) -
                    parseInt(style.getPropertyValue('padding-right'), 10);
            }

            function isElement(o) {
                return (
                    typeof HTMLElement === "object" ? o instanceof HTMLElement :
                        o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string"
                );
            }

            function hasClass(element, cls) {
                return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
            }

            function addStyleSheet() {
                if (document.getElementById("textFitStyleSheet")) return;
                var style = [
                    ".textFitAlignVert{",
                    "position: absolute;",
                    "top: 0; right: 0; bottom: 0; left: 0;",
                    "margin: auto;",
                    "display: flex;",
                    "justify-content: center;",
                    "flex-direction: column;",
                    "}",
                    ".textFitAlignVertFlex{",
                    "display: flex;",
                    "}",
                    ".textFitAlignVertFlex .textFitAlignVert{",
                    "position: static;",
                    "}",].join("");

                var css = document.createElement("style");
                css.type = "text/css";
                css.id = "textFitStyleSheet";
                css.innerHTML = style;
                document.body.appendChild(css);
            }
        }));

        // Main functionality
        const textInput = document.getElementById('textInput');
        const textOverlay = document.getElementById('textOverlay');
        const colorTrigger = document.getElementById('colorTrigger');
        const colorDropdown = document.getElementById('colorDropdown');
        const colorPreview = document.getElementById('colorPreview');
        const colorLabel = document.getElementById('colorLabel');
        const playButton = document.getElementById('playButton');
        const uiControls = document.getElementById('uiControls');
        const inputContainer = document.getElementById('inputContainer');
        const presentModeTrigger = document.getElementById('presentModeTrigger');
        const presentModeDropdown = document.getElementById('presentModeDropdown');
        const presentModeLabel = document.getElementById('presentModeLabel');
        const presentationEndControls = document.getElementById('presentationEndControls');
        const closePresentationButton = document.getElementById('closePresentationButton');
        const replayPresentationButton = document.getElementById('replayPresentationButton');
        const sessionStatus = document.getElementById('sessionStatus');
        const sessionIndicator = document.getElementById('sessionIndicator');
        const sessionText = document.getElementById('sessionText');

        // SIMPLE DROPDOWN SYSTEM
        function closeAllDropdowns() {
            if (colorDropdown) colorDropdown.classList.remove('open');
            if (presentModeDropdown) presentModeDropdown.classList.remove('open');
        }

        // Color theme functions
        function setTheme(themeName) {
            const options = document.querySelectorAll('.color-option');
            options.forEach(opt => opt.classList.remove('active'));
            
            if (themeName === 'white') {
                document.body.className = 'white';
                colorPreview.style.backgroundColor = '#fff';
                colorLabel.textContent = 'White';
                document.getElementById('whiteOption').classList.add('active');
                currentTheme = 'white';
                if (!presentationMode) {
                    textInput.value = "made by tanbaycu with love";
                }
            } else if (themeName === 'green') {
                document.body.className = 'green';
                colorPreview.style.backgroundColor = '#8ACF00';
                colorLabel.textContent = 'Green';
                document.getElementById('greenOption').classList.add('active');
                currentTheme = 'green';
                if (!presentationMode) {
                    textInput.value = "brat";
                }
            }
            
            updateText();
            closeAllDropdowns();
        }

        // Present mode functions
        function setPresentMode(mode) {
            const options = document.querySelectorAll('.present-mode-option');
            options.forEach(opt => opt.classList.remove('active'));
            
            presentMode = mode;
            
            if (mode === 'current') {
                presentModeLabel.textContent = 'Current Session';
                document.getElementById('currentOption').classList.add('active');
            } else if (mode === 'white') {
                presentModeLabel.textContent = 'White Only';
                document.getElementById('whiteOnlyOption').classList.add('active');
            } else if (mode === 'green') {
                presentModeLabel.textContent = 'Green Only';
                document.getElementById('greenOnlyOption').classList.add('active');
            }
            
            closeAllDropdowns();
        }

        // SIMPLE EVENT LISTENERS
        function setupEventListeners() {
            console.log('ðŸš€ Setting up dropdown event listeners...');
            
            // Kiá»ƒm tra elements tá»“n táº¡i
            if (!colorTrigger || !colorDropdown || !presentModeTrigger || !presentModeDropdown) {
                console.error('âŒ Some dropdown elements not found!');
                return;
            }

            // Color trigger
            colorTrigger.addEventListener('click', function(e) {
                e.stopPropagation();
                if (colorDropdown.classList.contains('open')) {
                    closeAllDropdowns();
                } else {
                    closeAllDropdowns();
                    colorDropdown.classList.add('open');
                    dropdownJustOpened = true;
                    setTimeout(() => {
                        dropdownJustOpened = false;
                    }, 100);
                }
            });

            // Present mode trigger
            presentModeTrigger.addEventListener('click', function(e) {
                e.stopPropagation();
                if (presentModeDropdown.classList.contains('open')) {
                    closeAllDropdowns();
                } else {
                    closeAllDropdowns();
                    presentModeDropdown.classList.add('open');
                    dropdownJustOpened = true;
                    setTimeout(() => {
                        dropdownJustOpened = false;
                    }, 100);
                }
            });

            // Color options
            const whiteOption = document.getElementById('whiteOption');
            const greenOption = document.getElementById('greenOption');
            
            if (whiteOption) {
                whiteOption.addEventListener('click', function(e) {
                    e.stopPropagation();
                    setTheme('white');
                });
            }
            
            if (greenOption) {
                greenOption.addEventListener('click', function(e) {
                    e.stopPropagation();
                    setTheme('green');
                });
            }

            // Present mode options
            const currentOption = document.getElementById('currentOption');
            const whiteOnlyOption = document.getElementById('whiteOnlyOption');
            const greenOnlyOption = document.getElementById('greenOnlyOption');
            
            if (currentOption) {
                currentOption.addEventListener('click', function(e) {
                    e.stopPropagation();
                    setPresentMode('current');
                });
            }
            
            if (whiteOnlyOption) {
                whiteOnlyOption.addEventListener('click', function(e) {
                    e.stopPropagation();
                    setPresentMode('white');
                });
            }
            
            if (greenOnlyOption) {
                greenOnlyOption.addEventListener('click', function(e) {
                    e.stopPropagation();
                    setPresentMode('green');
                });
            }

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                // Don't close if dropdown just opened
                if (dropdownJustOpened) {
                    return;
                }
                
                if (!e.target.closest('.color-selector') && !e.target.closest('.present-mode-selector')) {
                    closeAllDropdowns();
                }
            });
            
            console.log('âœ… Dropdown event listeners ready!');
        }

        // Session management
        function startNewSession() {
            currentSession = [];
            sessionStartTime = Date.now();
            isRecording = true;
            updateSessionStatus('recording');
        }

        function endCurrentSession() {
            if (currentSession.length > 0) {
                allHistory.push(...currentSession);
            }
            isRecording = false;
            updateSessionStatus('ready');
        }

        function updateSessionStatus(status) {
            sessionIndicator.className = `session-indicator ${status}`;
            switch(status) {
                case 'recording':
                    sessionText.textContent = 'Recording';
                    break;
                case 'ready':
                    sessionText.textContent = currentSession.length > 0 ? 'Ready to Present' : 'Ready';
                    break;
                default:
                    sessionText.textContent = 'Ready';
            }
        }

        function recordTyping(text, timestamp) {
            if (isRecording) {
                currentSession.push({
                    text: text,
                    timestamp: timestamp - sessionStartTime,
                    theme: currentTheme
                });
            }
        }

        // Text input functionality - GIá»® NGUYÃŠN LOGIC CÅ¨
        function updateText() {
            const text = textInput.value;
            const isGreen = document.body.classList.contains('green');
            const formattedText = formatTextForDisplay(text, isGreen);
            textOverlay.innerText = formattedText;
            $("#memeText").css({"display": "none"});
            textFit(textOverlay, {maxFontSize: 75});
            
            if (isRecording) {
                recordTyping(text, Date.now());
            }
        }

        textInput.addEventListener('input', updateText);

        // Theme setup - GIá»® NGUYÃŠN LOGIC CÅ¨ HOÃ€N TOÃ€N
        function setupTheme(color) {
            currentTheme = color;
            var body = document.getElementsByTagName("body")[0];
            var textInput = document.getElementById("textInput");

            if (color === "green") {
                body.classList.remove("white");
                body.classList.add("green");
                colorPreview.style.backgroundColor = '#8ACF00';
                colorLabel.textContent = 'Green';
                if (!presentationMode) {
                    textInput.value = "brat";
                }
                const formattedText = formatTextForDisplay(textInput.value, true);
                textOverlay.innerText = formattedText;
                textFit(textOverlay, {maxFontSize: 70});
                jQuery("body.green div#textOverlay span.textFitted").html("");
            } else {
                body.classList.remove("green");
                body.classList.add("white");
                colorPreview.style.backgroundColor = '#fff';
                colorLabel.textContent = 'White';
                if (!presentationMode) {
                    textInput.value = "made by tanbaycu with love";
                }
                const formattedText = formatTextForDisplay(textInput.value, false);
                textOverlay.innerText = formattedText;
                textFit(textOverlay, {maxFontSize: 70});
                jQuery("body.white div#textOverlay span.textFitted").html("");
            }
        }

        // Get presentation data based on mode
        function getPresentationData() {
            switch(presentMode) {
                case 'current':
                    return currentSession;
                case 'white':
                    return allHistory.filter(step => step.theme === 'white');
                case 'green':
                    return allHistory.filter(step => step.theme === 'green');
                default:
                    return currentSession;
            }
        }

        // Presentation mode - REPLAY SESSION
        function startPresentation() {
            const presentationData = getPresentationData();
            
            if (presentationData.length === 0) {
                const modeText = presentMode === 'current' ? 'current session' : `${presentMode} theme`;
                alert(`No typing data available for ${modeText}. Please type something first!`);
                return;
            }

            lastPresentationData = [...presentationData];
            presentationMode = true;
            document.body.classList.add('presentation-mode');
            closeAllDropdowns();
            
            runPresentation(presentationData);
        }

        function runPresentation(presentationData) {
            textOverlay.innerText = '';
            
            let currentIndex = 0;
            
            function replayTyping() {
                if (currentIndex < presentationData.length) {
                    const currentStep = presentationData[currentIndex];
                    const nextStep = presentationData[currentIndex + 1];
                    const delay = currentIndex === 0 ? 500 : 
                        (nextStep ? Math.min(nextStep.timestamp - currentStep.timestamp, 1000) : 0);
                    
                    presentationTimeout = setTimeout(() => {
                        if (currentStep.theme !== currentTheme) {
                            setupTheme(currentStep.theme);
                        }
                        
                        const isGreen = currentStep.theme === 'green';
                        const formattedText = formatTextForDisplay(currentStep.text, isGreen);
                        textOverlay.innerText = formattedText;
                        $("#memeText").css({"display": "none"});
                        textFit(textOverlay, {maxFontSize: 75});
                        
                        currentIndex++;
                        replayTyping();
                    }, delay);
                } else {
                    setTimeout(() => {
                        presentationEndControls.classList.add('show');
                    }, 1000);
                }
            }
            
            replayTyping();
            
            playButton.innerHTML = '<i data-lucide="square" style="width: 16px; height: 16px;"></i><span>Stop</span>';
            playButton.disabled = true;
            lucide.createIcons();
        }

        function exitPresentation() {
            presentationMode = false;
            document.body.classList.remove('presentation-mode');
            presentationEndControls.classList.remove('show');
            
            if (presentationTimeout) {
                clearTimeout(presentationTimeout);
            }
            
            updateText();
            
            playButton.innerHTML = '<i data-lucide="play" style="width: 16px; height: 16px;"></i><span>Present</span>';
            playButton.disabled = false;
            lucide.createIcons();
        }

        function replayPresentation() {
            if (lastPresentationData.length > 0) {
                presentationEndControls.classList.remove('show');
                if (presentationTimeout) {
                    clearTimeout(presentationTimeout);
                }
                runPresentation(lastPresentationData);
            }
        }

        playButton.addEventListener('click', function() {
            if (presentationMode) {
                exitPresentation();
            } else {
                startPresentation();
            }
        });

        closePresentationButton.addEventListener('click', function() {
            exitPresentation();
        });

        replayPresentationButton.addEventListener('click', function() {
            replayPresentation();
        });

        textInput.addEventListener('focus', function() {
            if (!isRecording && !presentationMode) {
                startNewSession();
            }
        });

        textInput.addEventListener('blur', function() {
            if (isRecording && !presentationMode) {
                setTimeout(() => {
                    if (!textInput.matches(':focus')) {
                        endCurrentSession();
                    }
                }, 100);
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (presentationMode) {
                    exitPresentation();
                } else {
                    closeAllDropdowns();
                }
            }
            if (e.key === ' ' && e.ctrlKey) {
                e.preventDefault();
                if (presentationMode) {
                    exitPresentation();
                } else {
                    startPresentation();
                }
            }
            if (e.key === 'r' && e.ctrlKey && presentationMode) {
                e.preventDefault();
                replayPresentation();
            }
            if (e.key === 'Enter' && isRecording && !presentationMode) {
                textInput.blur();
                endCurrentSession();
            }
        });

        // Initialize
        setupTheme('white');
        
        function initializeText() {
            const text = textInput.value;
            const isGreen = document.body.classList.contains('green');
            const formattedText = formatTextForDisplay(text, isGreen);
            textOverlay.innerText = formattedText;
            textFit(textOverlay, {maxFontSize: 75});
        }

        // Setup everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            initializeText();
            updateSessionStatus('ready');
            textInput.focus();
            

        });
    </script>
</body>
</html>
